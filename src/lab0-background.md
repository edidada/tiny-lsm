# 1. LSM Tree ç®€ä»‹
åœ¨å…·ä½“è¿›å…¥æœ¬å®éªŒä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥ç®€å•ä»‹ç»`LSM Tree`ã€‚

`LSM Tree`æ˜¯ä¸€ç§`KV`å­˜å‚¨æ¶æ„ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œå°†`KV`å­˜å‚¨çš„æ•°æ®ä»¥`SSTable`çš„å½¢å¼è¿›è¡ŒæŒä¹…åŒ–ï¼Œå¹¶é€šè¿‡`MemTable`è¿›è¡Œå†…å­˜ç¼“å­˜ï¼Œå½“`MemTable`çš„æ•°æ®é‡è¾¾åˆ°ä¸€å®šé˜ˆå€¼æ—¶ï¼Œå°†å…¶æŒä¹…åŒ–åˆ°ç£ç›˜ä¸­ï¼Œå¹¶é‡æ–°åˆ›å»ºä¸€ä¸ª`MemTable`ã€‚`LSM Tree`çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œå°†`KV`å­˜å‚¨çš„æ•°æ®ä»¥`SSTable`çš„å½¢å¼è¿›è¡ŒæŒä¹…åŒ–ï¼Œå¹¶é€šè¿‡`MemTable`è¿›è¡Œå†…å­˜ç¼“å­˜ã€‚å¹¶ä¸”ï¼Œ æ•°æ®ä»¥è¿½åŠ å†™å…¥çš„æ–¹å¼è¿›è¡Œï¼Œåˆ é™¤æ•°æ®ä¹Ÿæ˜¯é€šè¿‡æ›´æ–°çš„æ•°æ®è¿›è¡Œè¦†ç›–çš„æ–¹å¼å®ç°ã€‚

![Fig 1](images/intro/tiny-lsm-arch.drawio.png)

å¦‚å›¾æ‰€ç¤ºä¸º`LSM Tree`çš„æ ¸å¿ƒæ¶æ„ã€‚æˆ‘ä»¬é€šè¿‡`Put`, `Remove`å’Œ`Get`æ“ä½œçš„æµç¨‹å¯¹å…¶è¿›è¡Œä»‹ç»ã€‚

## 1.1 Put æ“ä½œæµç¨‹
`Put`æ“ä½œæµç¨‹å¦‚ä¸‹ï¼š
1. å°†`Put`æ“ä½œçš„æ•°æ®å†™å…¥`MemTable`ä¸­
   1. `MemTable`ä¸­åŒ…æ‹¬å¤šä¸ªé”®å€¼å­˜å‚¨å®¹å™¨(æœ¬é¡¹ç›®æ˜¯é‡‡ç”¨çš„è·³è¡¨`SkipList`)
      1. å…¶ä¸­æœ‰ä¸€ä»½ç§°ä¸º`current_table`, å³æ´»è·ƒè·³è¡¨, å…¶å¯è¯»å¯å†™
      2. å…¶ä½™çš„å¤šä»½è·³è¡¨å‡ä¸º`frozen_tables`, å³å³å†»ç»“è·³è¡¨, å…¶åªèƒ½è¿›è¡Œè¯»æ“ä½œ
   2. `Put`çš„é”®å€¼å¯¹é¦–å…ˆæ’å…¥åˆ°`current_table`ä¸­
      1. å¦‚æœ`current_table`çš„æ•°æ®é‡æœªè¾¾åˆ°é˜ˆå€¼, ç›´æ¥è¿”å›ç»™å®¢æˆ·ç«¯
      2. å¦‚æœ`current_table`çš„æ•°æ®é‡è¾¾åˆ°é˜ˆå€¼, åˆ™å°†`current_table`è¢«å†»ç»“ç§°ä¸º`frozen_tables`ä¸­çš„ä¸€ä»½, å¹¶é‡æ–°åˆå§‹åŒ–ä¸€ä»½`current_table`
2. å¦‚æœå‰è¿°æ­¥éª¤å¯¼è‡´äº†æ–°çš„`frozen_table`äº§ç”Ÿ, åˆ¤æ–­`frozen_table`çš„å®¹é‡æ˜¯å¦è¶…å‡ºé˜ˆå€¼
3. å¦‚æœè¶…å‡ºé˜ˆå€¼, åˆ™å°†`frozen_table`æŒä¹…åŒ–åˆ°ç£ç›˜ä¸­, å½¢æˆ`SST`(å…¨ç¨‹æ˜¯`Sorted String Table`), å•ä¸ª`SST`æ˜¯æœ‰åºçš„ã€‚
   1. `SST`æŒ‰ç…§ä¸åŒçš„å±‚çº§è¿›è¡Œåˆ’åˆ†, å†…å­˜ä¸­çš„`MemTable`åˆ·å‡ºçš„`SST`ä½äº`Level 0`, `Level 0`çš„`SST`æ˜¯å­˜åœ¨é‡å çš„ã€‚ï¼ˆä¾‹å¦‚`SST 0`çš„`key`èŒƒå›´æ˜¯`[0, 100)`, `SST 1`çš„`key`èŒƒå›´æ˜¯`[50, 150)`, é‚£ä¹ˆ`SST 0`å’Œ`SST 1`çš„`key`åœ¨`50, 100)`èŒƒå›´æ˜¯é‡å çš„, å› æ­¤æ— æ³•åœ¨æ•´ä¸ªå±‚çº§è¿›è¡ŒäºŒåˆ†æŸ¥è¯¢ï¼‰
   2. å½“`Level 0`çš„`SST`æ•°é‡è¾¾åˆ°ä¸€å®šé˜ˆå€¼æ—¶, ä¼šè¿›è¡Œ`Level 0`çš„`SST`åˆå¹¶, å°†`SST`è¿›è¡Œ`compact`æ“ä½œ, æ–°çš„`SST`å°†æ”¾åœ¨`Level 1`ä¸­ã€‚åŒæ—¶ï¼Œä¸ºä¿è¯æ­¤å±‚æ‰€æœ‰`SST`çš„`key`æœ‰åºä¸”ä¸é‡å , `compact`çš„`SST`éœ€è¦ä¸åŸæ¥`Level 1`çš„`SST`è¿›è¡Œé‡æ–°æ’åºã€‚ç”±äº`compact`æ—¶å°†ä¸Šä¸€å±‚æ‰€æœ‰çš„`SST`åˆå¹¶åˆ°äº†ä¸‹ä¸€å±‚, å› æ­¤æ¯å±‚å•ä¸ª`SST`çš„å®¹é‡æ˜¯å‘ˆæŒ‡æ•°å¢é•¿çš„ã€‚
   3. å½“æ¯ä¸€å±‚çš„`SST`æ•°é‡è¾¾åˆ°ä¸€å®šé˜ˆå€¼æ—¶, `compact`æ“ä½œä¼šé€’å½’åœ°å‘ä¸‹ä¸€å±‚è¿›è¡Œã€‚

## 1.2 Remove æ“ä½œæµç¨‹
ç”±äº`LSM Tree`çš„æ“ä½œæ˜¯è¿½åŠ å†™å…¥çš„, å› æ­¤`Remove`æ“ä½œä¸`Put`æ“ä½œæœ¬è´¨ä¸Šæ²¡æœ‰åŒºåˆ«, åªæ˜¯`Remove`çš„`value`è¢«è®¾å®šä¸ºç©ºä»¥æ ‡è¯†æ•°æ®çš„åˆ é™¤ã€‚

## 1.3 Get æ“ä½œæµç¨‹
`Get`æ“ä½œæµç¨‹å¦‚ä¸‹:
1. å…ˆåœ¨`Memtable`ä¸­æŸ¥æ‰¾, å¦‚æœæ‰¾åˆ°åˆ™ç›´æ¥è¿”å›ã€‚
   1. ä¼˜å…ˆæŸ¥æ‰¾æ´»è·ƒè·³è¡¨`current_table`
   2. å…¶æ¬¡å°è¯•æŸ¥æ‰¾`frozen_tables`, æŒ‰ç…§`id`å€’åºæŸ¥æ‰¾(å› ä¸º`id`è¶Šå°, è¡¨ç¤º`SkipList`è¶Šæ—§)
2. å¦‚æœåœ¨`Memtable`ä¸­æœªæ‰¾åˆ°, åˆ™åœ¨`SST`ä¸­æŸ¥æ‰¾ã€‚
   1. å…ˆåœ¨`Level 0`å±‚æŸ¥æ‰¾, å¦‚æœæ‰¾åˆ°åˆ™ç›´æ¥è¿”å›ã€‚æ³¨æ„çš„æ˜¯, `Level 0`å±‚ä¸æ‡‚çš„`SST`æ²¡æœ‰è¿›è¡Œæ’åº, å› æ­¤éœ€è¦æŒ‰ç…§`SST`çš„`id`å€’åºé€ä¸ªæŸ¥æ‰¾(å› ä¸º`id`è¶Šå°, è¡¨ç¤º`SST`è¶Šæ—§, ä¼˜å…ˆçº§è¶Šä½)
   2. éšåé€ä¸ªåœ¨åé¢çš„`Level`å±‚æŸ¥æ‰¾, æ­¤æ—¶æ‰€æœ‰çš„`SST`éƒ½å·²ç»è¿›è¡Œè¿‡æ’åº, å› æ­¤å¯åœ¨`Level`å±‚é¢è¿›è¡ŒäºŒåˆ†æŸ¥è¯¢ã€‚
3. å¦‚æœ`SST`ä¸­ä¸ºæŸ¥è¯¢åˆ°, è¿”å›ã€‚

è‡³æ­¤ï¼Œä½ å¯¹`LSM Tree`çš„`CRUD`æ“ä½œæµç¨‹æœ‰äº†ä¸€ä¸ªåˆæ­¥çš„å°è±¡, å¦‚æœä½ ç°åœ¨çœ‹ä¸æ‡‚çš„è¯, æ²¡å…³ç³»ã€‚åç»­çš„`Lab`ä¸­ä¼šå¯¹æ¯ä¸ªæ¨¡å—æœ‰è¯¦ç»†çš„è®²è§£ã€‚

# 2. LSM Tree VS B-Tree

æ¥ä¸‹æ¥å¯¹æ¯”åˆ†æä¸€ä¸‹LSM Tree å’Œ B-Treeã€‚B-Tree å’Œ LSM-Tree æ˜¯ä¸¤ç§æœ€å¸¸ç”¨çš„å­˜å‚¨æ•°æ®ç»“æ„ï¼Œå¹¿æ³›åº”ç”¨äºå„ç§æ•°æ®åº“å’Œå­˜å‚¨å¼•æ“ä¸­ã€‚

## 2.1 B-Tree æ¦‚è¿°

### 2.1.1 åŸºæœ¬ç»“æ„

B-Tree æ˜¯ä¸€ç§å¤šè·¯å¹³è¡¡æœç´¢æ ‘ï¼Œå…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š

* **å¤šè·¯æœç´¢**ï¼šæ¯ä¸ªèŠ‚ç‚¹å¯åŒ…å«å¤šä¸ª key å’Œå¤šä¸ªæŒ‡å‘å­èŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œå…¸å‹çš„é˜¶ä¸º M çš„ B-Tree æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šåŒ…å« M-1 ä¸ª key å’Œ M ä¸ªå­æŒ‡é’ˆã€‚
* **æœ‰åºæ€§**ï¼šèŠ‚ç‚¹å†…çš„ key æ˜¯æœ‰åºæ’åˆ—çš„ï¼Œæ»¡è¶³æœç´¢æ ‘çš„æ€§è´¨ï¼ˆå·¦å­æ ‘æ‰€æœ‰ key å°äºå½“å‰ keyï¼Œå³å­æ ‘æ‰€æœ‰ key å¤§äºå½“å‰ keyï¼‰ã€‚
* **èŠ‚ç‚¹å¹³è¡¡**ï¼šB-Tree æ€»æ˜¯ä¿æŒæ‰€æœ‰å¶å­èŠ‚ç‚¹åœ¨åŒä¸€æ·±åº¦ï¼Œé¿å…äº†ä¸å¹³è¡¡æ ‘é€ æˆçš„æ€§èƒ½åŠ£åŒ–ã€‚
* **ç£ç›˜ä¼˜åŒ–**ï¼šB-Tree èŠ‚ç‚¹è®¾è®¡ä¸ç£ç›˜é¡µå¤§å°ï¼ˆå¦‚ 4KBï¼‰å¯¹é½ï¼Œå°½é‡å‡å°‘ I/O æ¬¡æ•°ã€‚ä¸€ä¸ªèŠ‚ç‚¹ä¸€èˆ¬æ˜ å°„ä¸ºä¸€ä¸ªç£ç›˜é¡µã€‚

### 2.1.2 æ“ä½œæµç¨‹

#### æŸ¥æ‰¾æ“ä½œ

1. ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œé¡ºåºæŸ¥æ‰¾å½“å‰èŠ‚ç‚¹å†…çš„ keyï¼›
2. è‹¥æ‰¾åˆ°å¯¹åº” keyï¼Œè¿”å›å…¶å€¼ï¼›
3. è‹¥æœªæ‰¾åˆ°ï¼Œç¡®å®š key æ‰€å±èŒƒå›´å¹¶è·³è½¬åˆ°å¯¹åº”å­èŠ‚ç‚¹ï¼›
4. é‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œç›´åˆ°å¶å­èŠ‚ç‚¹ã€‚

#### æ’å…¥æ“ä½œ

1. å…ˆå®šä½æ’å…¥ä½ç½®ï¼›
2. è‹¥ç›®æ ‡é¡µæœªæ»¡ï¼Œç›´æ¥æ’å…¥ï¼›
3. è‹¥ç›®æ ‡é¡µå·²æ»¡ï¼Œè§¦å‘åˆ†è£‚æ“ä½œï¼Œå°†èŠ‚ç‚¹æ‹†åˆ†ä¸ºä¸¤ä¸ªï¼Œå¹¶å°†ä¸­é—´ key ä¸Šç§»è‡³çˆ¶èŠ‚ç‚¹ï¼›
4. å¦‚æœçˆ¶èŠ‚ç‚¹ä¹Ÿæ»¡ï¼Œåˆ™é€’å½’å‘ä¸Šåˆ†è£‚ï¼Œå¯èƒ½å¯¼è‡´æ ‘é«˜åº¦åŠ ä¸€ã€‚

#### åˆ é™¤æ“ä½œï¼ˆç®€ç•¥ï¼‰

1. æŸ¥æ‰¾è¦åˆ é™¤çš„ keyï¼›
2. è‹¥ä¸ºå¶å­èŠ‚ç‚¹ç›´æ¥åˆ é™¤ï¼Œè‹¥ä¸ºå†…éƒ¨èŠ‚ç‚¹éœ€ç”¨å‰é©±/åç»§æ›¿æ¢ï¼›
3. è‹¥åˆ é™¤å¯¼è‡´èŠ‚ç‚¹ key æ•°å°äºæœ€å°å€¼ï¼ˆé€šå¸¸æ˜¯ M/2ï¼‰ï¼Œéœ€å€Ÿ key æˆ–åˆå¹¶å…„å¼ŸèŠ‚ç‚¹ï¼Œä¿æŒå¹³è¡¡ã€‚

### 2.1.3 æ€§èƒ½ç‰¹ç‚¹

| æ“ä½œç±»å‹ | æ—¶é—´å¤æ‚åº¦ | å¤‡æ³¨ |
| -------- | ---------- | ---- |
| æŸ¥æ‰¾     | O(logâ‚˜N)   | æ ‘é«˜å–å†³äºæ‰‡å‡º Mï¼ŒM è¶Šå¤§æ ‘è¶ŠçŸ® |
| æ’å…¥     | O(logâ‚˜N)   | æœ€å¤šå‘ä¸Šåˆ†è£‚è‡³æ ¹èŠ‚ç‚¹ |
| åˆ é™¤     | O(logâ‚˜N)   | åŒ…å«è°ƒæ•´å’Œåˆå¹¶æ“ä½œ |

* **ä¼˜åŠ¿**ï¼šæŸ¥æ‰¾è·¯å¾„çŸ­ï¼Œé€‚ç”¨äº OLTP äº‹åŠ¡å‹æ•°æ®åº“ï¼›
* **åŠ£åŠ¿**ï¼šå†™å…¥ä¸ºé¡µå†…æ›´æ–°å’Œ**éšæœºå†™**ï¼Œ ä¸”å¯èƒ½å¯¼è‡´**å†™æ”¾å¤§**,ä¸é€‚åˆå†™å¯†é›†å‹è´Ÿè½½ã€‚

> ğŸŒªï¸ â€œéšæœºå†™â€æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ
>
> åœ¨ B-Tree ä¸­ï¼Œæ¯æ¬¡å†™å…¥ï¼ˆæ’å…¥ã€æ›´æ–°æˆ–åˆ é™¤ï¼‰éƒ½å¿…é¡»æ‰¾åˆ°å¯¹åº”ä½ç½®ï¼Œæ¯”å¦‚ä¸€ä¸ªå¶å­èŠ‚ç‚¹ä¸­çš„ç¬¬ n ä¸ª keyï¼š
>  1.	B-Tree ä¼šä»æ ¹èŠ‚ç‚¹ä¸€è·¯æŸ¥æ‰¾ï¼Œå®šä½åˆ°ç›®æ ‡é¡µï¼ˆä¹Ÿå°±æ˜¯ç£ç›˜ä¸Šçš„ä¸€ä¸ªèŠ‚ç‚¹ï¼‰ã€‚
>	2.	å¦‚æœè¯¥é¡µæ»¡äº†ï¼Œè¿˜è¦åˆ†è£‚æˆä¸¤ä¸ªé¡µï¼Œå†æ›´æ–°çˆ¶èŠ‚ç‚¹æŒ‡é’ˆï¼Œå¯èƒ½ä¸€ç›´é€’å½’åˆ°æ ¹ã€‚
>	3.	æ¯ä¸€ä¸ªæ“ä½œï¼Œå¯èƒ½éƒ½è¦è¯»å†™ä¸åŒä½ç½®çš„ç£ç›˜é¡µâ€”â€”è¿™äº›é¡µä¸åœ¨ç›¸é‚»ç£ç›˜ä½ç½®ä¸Šï¼Œå°±å«â€œéšæœºå†™â€ã€‚
>
> è€Œç£ç›˜ï¼ˆç‰¹åˆ«æ˜¯ä¼ ç»Ÿ HDDï¼‰æœ€æ…¢çš„æ“ä½œå°±æ˜¯éšæœºå†™ã€‚

> ğŸ”¥ â€œå†™æ”¾å¤§â€åˆæ˜¯ä»€ä¹ˆï¼Ÿ
>
> ä½ æœ¬æ¥åªæ˜¯æƒ³å†™å…¥ä¸€ä¸ª key-value å¯¹ï¼Œç»“æœ B-Tree å´å¯èƒ½ä¼šå› ä¸ºï¼š
>	 1. é¡µæ»¡è€Œåˆ†è£‚ï¼›
>	 2. çˆ¶èŠ‚ç‚¹ä¹Ÿæ»¡è€Œå†åˆ†è£‚ï¼›
>	 3. æ›´æ–°å¤šä¸ªç´¢å¼•è·¯å¾„èŠ‚ç‚¹ï¼›
>
> å¯¼è‡´ä½ å®é™…ä¸Šè¦å†™å…¥å¤šä¸ªèŠ‚ç‚¹ã€å¤šä¸ªé¡µâ€”â€”ä¸€æ¬¡å°å†™å…¥å¯¼è‡´å¤šæ¬¡ç£ç›˜å†™å…¥ï¼Œè¿™å°±å«å†™æ”¾å¤§ï¼ˆWrite Amplificationï¼‰ã€‚
>
> æ¯”å¦‚ä½ å†™äº† 1KB æ•°æ®ï¼Œç£ç›˜å®é™…å†™äº† 16KBï¼Œç”šè‡³ 64KBï¼Œè¿™ç§æµªè´¹ï¼Œå°±æ˜¯æ”¾å¤§äº†ã€‚
> 

## 2.2. LSM-Tree æ¦‚è¿°

### 2.2.1 è®¾è®¡åŠ¨æœº

ä¸ºäº†è§£å†³ä¼ ç»Ÿ B-Tree åœ¨å†™å¯†é›†åœºæ™¯ä¸‹çš„éšæœºå†™å’Œé«˜å†™æ”¾å¤§é—®é¢˜ï¼ŒLSM-Tree é‡‡å–â€œå…ˆå†…å­˜å†™ã€å†åå°åˆå¹¶â€çš„æ€è·¯ï¼Œä»¥ç©ºé—´æ¢æ—¶é—´ï¼Œæå‡å†™å…¥ååã€‚

### 2.2.2 ä¸»è¦ç»„ä»¶ä¸æµç¨‹

1. **MemTableï¼ˆå†…å­˜è¡¨ï¼‰**ï¼šæ‰€æœ‰å†™æ“ä½œé¦–å…ˆè¿½åŠ åˆ°å†…å­˜ä¸­çš„æœ‰åºç»“æ„ï¼ˆå¦‚è·³è¡¨ï¼‰ã€‚
2. **SSTableï¼ˆç£ç›˜è¡¨ï¼‰**ï¼šå½“ MemTable è¾¾åˆ°é˜ˆå€¼æ—¶ï¼Œå°†å…¶å®šæœŸåˆ·æ–°ä¸ºåªè¯»çš„ç£ç›˜æ–‡ä»¶ã€‚
3. **åå° Compactionï¼ˆåˆå¹¶ï¼‰**ï¼šå°†å¤šä¸ªæ—§çš„ SSTable åˆå¹¶ã€å»é‡ï¼Œå¹¶ç”Ÿæˆæ–°çš„ SSTableï¼Œæ§åˆ¶æ–‡ä»¶æ•°é‡ä¸æ•°æ®å†—ä½™ã€‚

### 2.2.3 ä¼˜åŒ–æ‰‹æ®µ

* **Bloom Filter**ï¼šå¿«é€Ÿåˆ¤æ–­æŸ key æ˜¯å¦å­˜åœ¨äºæŸä¸ª SSTableï¼Œå‡å°‘ä¸å¿…è¦çš„ç£ç›˜æŸ¥æ‰¾ã€‚
* **Index Block / Block Cache**ï¼šç¼“å­˜çƒ­ç‚¹æ•°æ®é¡µï¼ŒåŠ é€Ÿè¯»è¯·æ±‚ã€‚
* **Tiered / Leveled Compaction**ï¼šé€šè¿‡åˆ†å±‚æˆ–åˆ†é˜¶æ®µåˆå¹¶ï¼Œå¹³è¡¡å†™æ”¾å¤§ä¸è¯»æ”¾å¤§ã€‚

---

## 2.3. B-Tree vs. LSM-Tree å¯¹æ¯”

| ç‰¹æ€§     | B-Tree          | LSM-Tree                         |
| ------ | --------------- | -------------------------------- |
| å†™å…¥æ¨¡å¼   | éšæœºå†™ï¼Œé¡µå†…æ›´æ–°ï¼Œå¯èƒ½åˆ†è£‚èŠ‚ç‚¹ | é¡ºåºå†™ï¼ˆè¿½åŠ ï¼‰ï¼Œåå°åˆå¹¶                     |
| å†™æ”¾å¤§    | è¾ƒä½              | è¾ƒé«˜ï¼ˆå—åˆå¹¶ç­–ç•¥å½±å“ï¼‰                      |
| è¯»å–è·¯å¾„   | å•æ¬¡æ ‘æœç´¢           | å¤šçº§æŸ¥æ‰¾ï¼ˆMemTable + å¤šä¸ª SSTable + åˆå¹¶ï¼‰ |
| è¯»å†™æ€§èƒ½åœºæ™¯ | è¯»å¯†é›†å‹            | å†™å¯†é›†å‹                             |
| ç£ç›˜å‹å¥½æ€§  | éšæœº I/O          | é¡ºåº I/Oï¼Œæ›´é€‚åˆ SSD                   |

> **å°ç»“**ï¼šLSM-Tree åœ¨å†™å…¥ååä¸Šä¼˜äº B-Treeï¼Œä½†è¯»å–å»¶è¿Ÿä¸ I/O æˆæœ¬ç›¸å¯¹æ›´é«˜ã€‚
> æ›´æ·±å…¥çš„å¯¹æ¯”åˆ†æå¯ä»¥é˜…è¯»ï¼š
> [https://tikv.org/deep-dive/key-value-engine/b-tree-vs-lsm/](https://tikv.org/deep-dive/key-value-engine/b-tree-vs-lsm/)

---

## 2.4 å¸¸è§ç³»ç»ŸåŠåº”ç”¨åœºæ™¯

| å­˜å‚¨å¼•æ“ / æ•°æ®åº“   | ç±»å‹          |
| ------------ | ----------- |
| LevelDB      | åµŒå…¥å¼ KV å­˜å‚¨å¼•æ“ |
| RocksDB      | KV å­˜å‚¨å¼•æ“     |
| HyperLevelDB | åˆ†å¸ƒå¼ KV å­˜å‚¨   |
| PebbleDB     | åµŒå…¥å¼ KV å­˜å‚¨   |
| Cassandra    | åˆ†å¸ƒå¼åˆ—å­˜å‚¨æ•°æ®åº“   |
| ClickHouse   | åˆ†æå‹æ•°æ®åº“      |
| InfluxDB     | æ—¶é—´åºåˆ—æ•°æ®åº“     |

---

## 2.5 LSM-Tree ä¼˜åŒ–ç ”ç©¶

LSM Treeè‡ª1997å¹´æå‡ºåï¼Œæœ‰å¾ˆå¤šç ”ç©¶äººå‘˜åœ¨LSM Treeçš„åŸºç¡€ä¸Šè¿›è¡Œäº†æ”¹è¿›ï¼Œéƒ¨åˆ†ä»£è¡¨æ€§å·¥ä½œæ¯”å¦‚ï¼š


[RocksDB](), [LevelDB]()ï¼šç»å…¸çš„LSM Based KVå­˜å‚¨å¼•æ“.

[WiscKey: Separating Keys from Values in SSD-Conscious Storage](https://www.usenix.org/system/files/conference/fast16/fast16-papers-lu.pdf)ï¼šåˆ†ç¦» Key å’Œ Valueï¼Œé™ä½å†™æ”¾å¤§

[Monkey: Optimal Bloom Filters and Tuning for LSM-Trees](https://www.usenix.org/system/files/conference/fast16/fast16-papers-lu.pdf)ï¼šä¼˜åŒ–å¸ƒéš†è¿‡æ»¤å™¨åˆ†é…ç­–ç•¥ï¼Œå‡å°‘è¯»æ”¾å¤§


è¿™é‡Œä¸å†è¿›è¡Œè¯¦ç»†ä»‹ç»ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥é˜…è¯»ç›¸å…³è®ºæ–‡ã€‚



